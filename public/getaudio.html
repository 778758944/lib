<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Examples</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">
<script type="text/javascript" src='getaudio.js'></script>
<script type="text/javascript" src='http://react.xingwentao.top/public/ajax.js'></script>
</head>
<body>
	<audio controls autoplay></audio>
	<button id='btn1'>录音</button>
	<button id='btn2'>停止</button>
	<button id='btn3'>播放</button>
    <button id='btn4'>上传</button>
    <script>
    	var recoder;

    	var btn1=document.getElementById('btn1');
    	var btn2=document.getElementById('btn2');
    	var btn3=document.getElementById('btn3');
        var btn4=document.getElementById('btn4');

    	var audio=document.querySelector('audio');

    	function startRecorder(){
    		HZRecorder.get(function(rec){
    			console.log(rec);
    			recoder=rec;
    			recoder.start();
    		})
    	}


    	function stopRecord(){
    		recoder.stop();
    	}

    	function playSound(){
    		recoder.play(audio);
    	}



    	btn1.onclick=startRecorder;
    	btn2.onclick=stopRecord;
    	btn3.onclick=playSound;

        btn4.onclick=function(){
            console.log('upload');
            var data=new FormData();
            console.log(recoder.getBlob());
            data.append('audioData',recoder.getBlob());
            post('http://localhost:3000/uploadWav',data,function(res){
                console.log(res);
            })
        }




    </script>
</body>
</html>




























